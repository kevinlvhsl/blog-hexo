---
title: js中正则表达式
date: 2019-02-13 17:39:52
tags: [javascript]
---

![cocos_creator](/assets/reg.jpg)

#### 正则是什么

正则就是用来处理字符串的:匹配字符串的格式是否符合既定的格式(正则的匹配)、把一个字符串中符合既定格式的内容获取到(正则的捕获)；

#### 正则的组成

每个正则都是由元字符和修饰符两部分组成， “/”里面的 内容称为元字符 “/” [修饰符]g、i、m
```
  g(global)-> 全局匹配
  i(ignoreCase)-> 忽略大小写匹配
  m(multiline)-> 换行匹配

```

### 两个重要的方法

+ test 匹配
```
 var reg = /\d/;//-> \d一个0-9之间的数字 ->包含一个0-9之间的数字的规则
 console.log(reg.test("2016"));//->true
 console.log(reg.test("duff990fff"));//->true
 console.log(reg.test("dufffff"));//->false
```

+ exec 捕获
```
  var reg = /\d/g;
  console.log(reg.exec("2016"));//->["2", index: 0, input: "2016"]
  console.log(reg.exec("2016"));//->["0"...]
  console.log(reg.exec("2016"));//->["1"...]
  console.log(reg.exec("2016"));//->["6"...]

```


### 正则常用的元字符

+ 1)具有特殊意义的元字符
```
  \d -> 匹配一个0-9的数字,相当于[0-9],和它相反的是\D ->匹配一个除了0-9的任意字符
 \w -> 匹配一个0-9、a-z、A-Z、_的数字或字符,相当于[0-9a-zA-Z_]
 \s -> 匹配一个空白字符(空格、制表符...)
 \b -> 匹配一个单词的边界
 \t -> 匹配一个制表符
 \n -> 匹配一个换行
 . -> 匹配一个除了\n以外的任意字符
 ^ -> 以某一个元字符开头
 $ -> 以某一个元字符结尾
 \ -> 转义字符
 x|y -> x或者y的一个
 [xyz] -> x、y、z中的任意一个
 [^xyz] -> 除了xyz中的任意一个字符
 [a-z] -> 匹配a-z中的任意一个字符
 [^a-z] -> 匹配除了a-z中的任意一个字符
 () -> 正则中的分组

```

+ 2)代表出现次数的"量词元字符"
```
  ->+ : 出现一到多次
  ->* : 出现零到多次
  ->? : 出现零到一次
  ->{n} : 出现n次
  ->{n,} : 出现n到多次
  ->{n,m} : 出现n-m次

```

小case

```js
 // ^/$
 var reg = /\d+/;//->包含一到多个数字(0-9)即可
 console.log(reg.test("duffy2016"));//->true

 reg = /^\d+$/;//->只能是一到多个数字
 console.log(reg.test("duffy2016"));//->false
 console.log(reg.test("2016"));//->true

// -> .
 var reg = /^2.6$/;
 console.log(reg.test("2.6"));//->true
 console.log(reg.test("2@6"));//->true

 reg = /^2\.6$/;//->\是转义字符:把.这个特殊意义(任意字符)的元字符转变为只代表本身意义(小数点)的一个普通元字符
 console.log(reg.test("2.6"));//->true
 console.log(reg.test("2@6"));//->false

// ->[]
    //->在中括号中出现的所有字符(不管之前代表什么意思),在这里都是只代表本身的意思
    var reg = /^[2.3]$/;//->.这里只代表小数点,不是任意字符了
    reg = /^[\dz]$/;//->\d本身整体就是0-9之间的数字,在这里还是这个意思

//->在中括号中出现的两位数不是一个两位数，而是左边或者右边的
//var reg = /^[10-23]$/;//->1或者0-2或者3


 // 在中括号中"-"具有连字符的作用,如果只想表示-,需要把其放在末尾
    //var reg = /^[12-]$/;

    //->中括号本身也有特殊的意思,如果需要只代表中括号本身的意思,需要进行转义
    //var reg = /^\[\d+\]$/;//->"[200]"

//->x|y
//var reg = /^1|2$/;//->和这个有区别:/^[12]$/
//->1、2、12

    //var reg = /^10|28$/;
    //->10、28、1028、102、108、128、028 ->不是我们想要的那个10或者28了

//var reg = /^(10|28)$/;//->10或者28



```


+ 3) 分组:把一个大正则划分成几个小正则 1)改变正则的默认优先级

`var reg = /^(10|28)$/;//->10或者28`


+ 4)分组的第二个作用：分组引用
```
  "wood" "foot" "week" "feel" "door" "food" "good" "cool"...
    var reg = /^[a-z]([a-z])\1[a-z]$/i;//->\1出现和第一个分组一模一样的内容
```

+ 5、创建一个正则也有两种方式：字面量方式、实例创建的方式
```
    //->实例创建第一参数值是字符串
    //->想要和字面量方式保持统一的话,对于\d \w \n...这些都需要多加一个\,使其\d具有自己的特殊的意义
    var reg = /^\d+$/ig;
    console.log(reg.test("2016"));//->true
    reg = new RegExp("^\d+$", "ig");
    console.log(reg.test("2016"));//->false
    reg = new RegExp("^\\d+$", "ig");
    console.log(reg.test("2016"));//->true

    //->对于[]、()这类的是没有区别的
    //    var reg = /^[0-9]$/;
    //    console.log(reg.test("0"));//->true
    //    reg = new RegExp("^[0-9]$");
    //    console.log(reg.test("0"));//->true

    //->在实例创建的方式中,我们只要出现\,基本上都是要写\\的
    //    var reg = /^\[100\]$/;
    //    console.log(reg.test("[100]"));//->true
    //    reg = new RegExp("^\[100\]$");
    //    console.log(reg.test("[100]"));//->false
    //    reg = new RegExp("^\\[100\\]$");
    //    console.log(reg.test("[100]"));//->true

```


### 常用的正则表达式
```
+ 1、手机号:11位数字、都是以1开头的
`var reg = /^1\d{10}$/;`
+ 2、真实姓名(中国):两到四位的汉字
`var reg = /^[\u4e00-\u9fa5]{2,4}$/;`
+ 3、验证邮箱
// 1633397595@qq.com
// 1633397595@163.com.cn
// 1633397595@163.com
// duffy_youxiang@tengxu.cn
//var reg7 = /^[\w.-]+@$/  //@分解两边 左边任意,\w 数字，大小写字符_ - . 右边
var reg7 = /^[\w.-]+@([1-9]|[a-z]|[A-Z])+(\.[A-Za-z]{2,4}){1,2}$/
console.log(reg7.test('1633397595@qq.com'))

+ 4、验证有效数字的
  0 -12 -12.3 -12.0 12.3 12.0
    ->可能出现"-"也可能不出现,出现的话只能出现一次
    ->整数部分是一到多个数字,但是两位数及以上的话不能以0开头
    ->小数部分可能有可能没有,一但有必须是 .后面跟一位或者多位数字
    var reg = /^-?(\d|([1-9]\d+))(\.\d+)?$/;
+ 5、年龄:18-65之间
    18-19  /^1(8|9)$/
    20-59  /^[2-5]\d$/
    60-65  /^6[0-5]$/
    var reg = /^((18|19)|([2-5]\d)|(6[0-5]))$/;


```

### 正则的捕获
https://juejin.im/post/5acb4d3f6fb9a028c813295e

